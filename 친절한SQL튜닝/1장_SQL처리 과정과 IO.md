# 1장 SQL 처리 과정과 I/O

## 1.1장 SQL 파싱과 최적화
<> SQL 최적화 파싱
> SQL 파싱 : SQL을 전달받으면, 가장 먼저 SQL 파서가 파싱을 진행
  - 파싱 트리 생성 : SQL문을 이루는 개별 구성요소를 분석해서 파싱 트리 생성
  - Syntax 체크 : 문법적 오류 체크 ex) 누락된 키워드 및 사용할 수 없는 키워드
  - Semantic 체크 : 의미상 오류가 없는지 체크 ex) 존재하지 않는 테이블, 컬럼, 권한
  a. SQL 최적화 : SQL 옵티마이저는 미리 수집한 시스템 및 오브젝트 통계정보를 바탕으로 다양한 실행경로를 생성해서 비교한 후, 가장 효율적인 하나를 선택 --> 데이터 베이스 성능을 결정하는 가장 핵심적인 엔진 (옵티마이저가 이 역할을 맡음)
   - 일반적으로 처리 과정을 세세하게 설명할 목적이 아니면 일반적으로 이 둘을 구분할 필요는 없음
  b. 로우 소스 생성 : SQL 옵티마이저가 선택한 실행경로를 실제 실행 가능한 코드 또는 프로시저 형태로 포맷팅하는 단계(로우 소스 생성기가 이 역할을 맡음)
> SQL 옵티마이저
> 옵티마이저 최적화 단계. 
  
  a. 전달받은 쿼리를 수행하는데 후보군이 될만한 실행계획을 찾음   
  b. 데이터 딕셔너리에 미리 수집해 둔 오브젝트 통계 및 시스템 통계정보를 이용해 각 실행계획 및 예상비용을 산정  
  c. 최저 비용을 나타내는 실행계획을 선택
> 실행계획과 비용
  - SQL 옵티마이저는 자동차 네비게이션과 비슷(경로 요약,모의 주행)
  - DBMS에 SQL 실행경로 미리보기 기능이 있음. 이것이 실행 계획
  - 실행 계획에 표시되는 Cost도 어디까지나 예상치. 실행경로를 선택하기 위해 옵티마이저가 여러 통계정보를 활용해서 계산해 낸 값
  - ** 비용 : 쿼리를 수행하는 동안 발생할 것으로 예상하는 I/O 횟수 또는 예상 소요시간을 표현한 값
> 옵티마이저 힌트
  - 힌트
    - SQL 옵티마이저는 대부분 좋은 선택을 하지만, 완벽하지 않음
    - 옵티마이저 힌트를 이용해 데이터 액세스 경로를 바꿀 수 있음
    - /*+ INDEX(A 고객_PK) */
> 주의사항
  - 힌트 안에 인자를 나열할 땐 ,(콤마)를 사용할 수 있지만, 힌트와 힌트사이에는 불가
  - 스키마명을 명시하면 안됨
  - From 절에서 AS 사용 시 AS명으로 사용해야 함
  - 기왕에 힌트를 쓸 거면, 빈틈없이 기술해야 함
